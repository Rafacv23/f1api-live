---
import SeasonsNav from "@/components/SeasonsNav.astro";
import Layout from "@/layouts/Layout.astro";
import { f1api } from "@/lib/f1Api";

const { year } = Astro.params;

export async function getStaticPaths(){

    const seasons = await f1api.getSeasons()

    return seasons.championships.map((season) => ({
        params: { year: season.year },
        props: { year: season.year },
    }))
}


const races = await f1api.getRacesByYear({year: year})

---

<Layout>
    <SeasonsNav/>
    <h1>{year} season info</h1>
    <ul>
        {races.races.map((race) => 
            <li>
                <a href={`/${year}/${race.round}`}>
                        {race.raceName}
                </a>
            </li>)}
    </ul>
</Layout>