---
import Layout from "@/layouts/Layout.astro";
import { f1api } from "@/lib/f1Api";

const { year } = Astro.params;

export async function getStaticPaths(){

    const seasons = await f1api.getSeasons()

    return seasons.championships.map((season) => ({
        params: { year: season.year, },
        props: { year: season.year },
    }))
}

let teamStandings

if(year){
    teamStandings = await f1api.getConstructorStandings({year: year})
}

---

<Layout>
    <h1>Team standings, season {year}</h1>
    {teamStandings?.constructors_championship.map((team) => 
        <div>
            <h2>{team.team.teamName}</h2>
            <p>points: {team.points}</p>
            <p>position: {team.position}</p>
        </div>
    )}
</Layout>